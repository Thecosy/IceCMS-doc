---
id: auth-provider
title: å¸¸è§é—®é¢˜
sidebar_label: å¸¸è§é—®é¢˜
---

## å¸¸è§é—®é¢˜

## 1.æ–‡ä»¶ä¸Šä¼ ä¸äº†/å›¾ç‰‡ä¸æ˜¾ç¤ºï¼Ÿ

è¯·å‚ç…§æ–‡æ¡£ä¸­çš„[æ–‡ä»¶å­˜å‚¨é…ç½®](https://doc.tduckcloud.com/proDeploy/fileConfigure.html)ï¼Œå®Œæˆç³»ç»Ÿçš„æ–‡ä»¶ä¸Šä¼ è®¾ç½®åé‡è¯•ã€‚

## 2.éƒ¨ç½²åè®¿é—®è¡¨å•å‡ºç° "ç³»ç»ŸæœªçŸ¥é”™è¯¯ï¼Œè¯·åé¦ˆç³»ç»Ÿç®¡ç†å‘˜"

![](http://doc-oss.tduckcloud.com/doc/202302041331372.png)

éƒ¨ç½²åè®¿é—®è¡¨å•å‡ºç°æ­¤ç±»é—®é¢˜æ—¶ï¼Œè¯·æ£€æŸ¥ï¼šç³»ç»Ÿé…ç½®>å¾®ä¿¡å…¬ä¼—å·å‚æ•°æ˜¯å¦å·²ç»å®Œæˆé…ç½®ï¼Œè‹¥æ²¡æœ‰é…ç½®è¯·éšæ„å¡«å†™ä»»æ„å€¼ï¼Œä¿å­˜ååˆ·æ–°è¡¨å•å³å¯è§£å†³

![](http://doc-oss.tduckcloud.com/doc/%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_02d60921-d90c-4a4d-a879-7007c86f5e70.png)

## 3.å‡ºç° appid æœªé…ç½®ï¼Ÿ

+   é¦–å…ˆåœ¨ç³»ç»Ÿè®¾ç½®ä¸­æ£€æŸ¥æ˜¯å¦æ­£ç¡®é…ç½®äº†ï¼šå·²ç»è®¤è¯çš„æœåŠ¡å·
+   æ£€æŸ¥å¾®ä¿¡å…¬ä¼—å·ï¼ˆæœåŠ¡å·ï¼‰åå°æ˜¯å¦é…ç½®äº†æœåŠ¡å™¨åŸŸå/ç­‰å‚æ•°
+   å‚è€ƒæ–‡æ¡£ï¼š[å¾®ä¿¡å…¬ä¼—å·é…ç½®](https://doc.tduckcloud.com/proDeploy/othersConfigure.html)

## 4.è®¿é—®å‰ç«¯ï¼Œè¯·æ±‚å‡ºç°502ï¼Ÿ

ä¸€èˆ¬ä¸ºnginxæœªé…ç½®æ­£ç¡®ï¼Œè¯·æ£€æŸ¥Ngçš„é…ç½®ï¼Œæ–‡æ¡£åœ°å€ï¼š[proéƒ¨ç½²](https://doc.tduckcloud.com/proDeploy/)

## 5.doc/tduck-pro.sql é‡Œçš„é»˜è®¤ç”¨æˆ·å¯†ç æ˜¯å•¥ï¼Ÿ

admin/12345678

## 6.sys\_noticeæ²¡æœ‰è¿™å¼ è¡¨/æ•°æ®åº“æ–‡ä»¶æ€ä¹ˆæ‰§è¡Œï¼Ÿ

![4fd8e96c6826e9c1dba66d657ec1856.png](http://doc-oss.tduckcloud.com/doc/1642571966349-4b84fc31-65e2-4a27-9783-34ef8f47411e.png)

## 7.æ–‡ä»¶å·²ç»èƒ½å­˜åˆ°é˜¿é‡Œäº‘çš„ossä¸Šï¼Œåœ¨å‰å°ç‚¹å‡»æŸ¥çœ‹æ–‡ä»¶çš„æ—¶å€™ï¼Œç³»ç»Ÿæç¤º404ï¼Œè¯·é—®è¿™ä¸ªé—®é¢˜æœ‰æ²¡æœ‰è°é‡åˆ°è¿‡ï¼Ÿ

ä¸€å®šæ˜¯åŸŸåé…ç½®æœ‰é—®é¢˜ï¼Œè¯·æ£€æŸ¥ç¬¬ä¸‰æ–¹å‚æ•°ä¸åŸŸåè®¾ç½®

## 8.æ‰§è¡Œmavenæ—¶å€™æŠ¥é”™ï¼Ÿ

initializationError(com.tduck.cloud.activiti.service.impl.ActivitiExpressionTest): Invalid test class 'com.tduck.cloud.activiti.service.impl.ActivitiExpressionTest'ğŸ˜¦..)  
test(com.tduck.cloud.api.web.controller.system.ElasticsearchTest): Elasticsearch exception \[type=resource\_already\_exists\_exception, reason=index \[test001/TqWgcRKvT0G\_yN0is1Cylw\] already exists\]; nested exception is \[test001/TqWgcRKvT0G\_yN0is1Cylw\] ElasticsearchStatusException\[Elasticsearch exception \[type=resource\_already\_exists\_exception, reason=index \[test001/TqWgcRKvT0G\_yN0is1Cylw\] already exists\]\]  
![image.png](http://doc-oss.tduckcloud.com/doc/1642561569011-5c1f715a-e79e-4d00-8717-dfbdb77c072e.png)  
è·³è¿‡å•å…ƒæµ‹è¯•å³å¯

## 9.ç‚¹å‡»æ–‡ä»¶çš„æ—¶å€™ï¼Œå…ˆè·³è½¬è¿™ä¸ªç½‘å€ï¼Œåé¢å†æŠ¥404é”™è¯¯ï¼Ÿ

OSSåŸŸåæ²¡æœ‰é…ç½®åŸŸåçš„æ—¶å€™æ˜¯ä¸æ˜¯æ²¡å¸¦https://

## 10.æœ¬åœ°æ–‡ä»¶å­˜å‚¨å¦‚ä½•é…ç½®ï¼Ÿ

![10dd410131513be3bf58716a6c23fca.png](http://doc-oss.tduckcloud.com/doc/1642561642893-117fb5e9-a4ba-43db-8062-27e34722d9b7.png)

## 11.çŸ­ä¿¡å¦‚ä½•é…ç½®ï¼Ÿ

ä»¥é˜¿é‡Œäº‘ä¸ºä¾‹ï¼Œé¦–å…ˆåˆ°é˜¿é‡Œäº‘ç”³è¯·çŸ­ä¿¡ä¹‹åï¼Œéœ€è¦å°†æ¨¡æ¿codeå¡«å…¥tduckçŸ­ä¿¡é…ç½®

![1642571759(1).png](http://doc-oss.tduckcloud.com/doc/1642571762026-d4663513-9b24-4182-b407-f137c5c52c46.png)  
å†å¡«å…¥appkeyã€secretç­‰å‚æ•°å³å¯

## 12.åœ¨éƒ¨ç½²çš„æ—¶å€™vueç«¯åªèƒ½éƒ¨ç½²åœ¨ROOTç›®å½•ä¸‹å—ï¼Ÿ

ä¸æ˜¯ï¼å¯ä»¥è‡ªå·±æ”¹çš„ï¼Œå¦‚å›¾

![6bfdb49e88f0860e888b32529a186d3.png](http://doc-oss.tduckcloud.com/doc/1642572209140-2cb5fd31-7d94-44a4-9f6f-3012c25e1b68.png)

## 13.æ•°æ®åº“è¿æ¥æŠ¥é”™ ä»€ä¹ˆurl å¯†ç ä¸å¯¹ ï¼Ÿ

é¦–å…ˆæ£€æŸ¥æŒ‡å®šçš„æ˜¯å“ªä¸ªé…ç½®æ–‡ä»¶ï¼Œç„¶åæ£€æŸ¥å¯†ç å’Œæ•°æ®åº“åœ°å€æ˜¯å¦æ­£ç¡®

![e147e6dd7d6cbae942c604c3a30af6b.png](http://doc-oss.tduckcloud.com/doc/1642572296113-60c5e5b2-ea4f-4bc6-932a-c915111aa17c.png)


## 14.æ”¯æŒä»€ä¹ˆé‚®ç®±ï¼Œexchangeæ”¯æŒå—ï¼Œè…¾è®¯é‚®ç®±æ”¯æŒå—ï¼Ÿ

é‚®ç®±æ˜¯é€šè¿‡\_SMTP åè®®å‘é€çš„ï¼Œæ”¯æŒè¯¥åè®®çš„æ‰€æœ‰é‚®ç®±éƒ½æ”¯æŒ\_

## 15. å¼‚å¸¸ï¼š`java.security.InvalidKeyException: Illegal key size`

### é—®é¢˜æè¿°

ä»£ç å‡ºç°ä»¥ä¸‹å¼‚å¸¸ï¼š

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'wxPayController': Injection of resource dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'wxPayServiceImpl': Injection of resource dependencies failed; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'wxPayClient' defined in class path resource [com/ttice/icepayment/config/WxPayConfig.class]: Unsatisfied dependency expressed through method 'getWxPayClient' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'getVerifier' defined in class path resource [com/ttice/icepayment/config/WxPayConfig.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.wechat.pay.contrib.apache.httpclient.auth.ScheduledUpdateCertificatesVerifier]: Factory method 'getVerifier' threw exception; nested exception is java.lang.IllegalArgumentException: java.security.InvalidKeyException: Illegal key size
        at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.postProcessProperties(CommonAnnotationBeanPostProcessor.java:321) ~[spring-context-5.2.10.RELEASE.jar!/:5.2.10.RELEASE]
```

### é—®é¢˜åŸå› 

å¦‚æœå¯†é’¥å¤§äº 128 ä½ï¼Œä¼šæŠ›å‡º `java.security.InvalidKeyException: Illegal key size` å¼‚å¸¸ã€‚è¿™æ˜¯å› ä¸ºå¯†é’¥é•¿åº¦å—é™åˆ¶ï¼ŒJava è¿è¡Œæ—¶ç¯å¢ƒè¯»å–çš„æ˜¯å—é™çš„ `policy` æ–‡ä»¶ã€‚è¿™äº›æ–‡ä»¶ä½äº `${java_home}/jre/lib/security` ç›®å½•ä¸‹ï¼Œè¿™ç§é™åˆ¶æ˜¯ç”±äºç¾å›½å¯¹è½¯ä»¶å‡ºå£çš„æ§åˆ¶ã€‚

### è§£å†³æ–¹æ¡ˆ

1. **ä¸‹è½½ Oracle å®˜æ–¹çš„ JCE æ–‡ä»¶ï¼ˆJDK 8 å¯¹åº”ç‰ˆæœ¬ï¼‰**ï¼š
   - ä¸‹è½½é“¾æ¥ï¼ˆå¯èƒ½éœ€è¦ç™»å½• Oracle è´¦æˆ·ï¼‰ï¼š[https://www.oracle.com/java/technologies/javase-jce8-downloads.html](https://www.oracle.com/java/technologies/javase-jce8-downloads.html)

2. **æ›¿æ¢æ–‡ä»¶**ï¼š
   - è§£å‹ä¸‹è½½çš„æ–‡ä»¶åï¼Œæ›¿æ¢ä»¥ä¸‹ä¸¤ä¸ªæ–‡ä»¶ï¼š
     - `local_policy.jar`
     - `US_export_policy.jar`

3. **è¦†ç›– JDK è·¯å¾„ä¸‹çš„ç›®å½•**ï¼š
   - å°†ä¸Šè¿°æ–‡ä»¶è¦†ç›–åˆ° `${JAVA_HOME}/jre/lib/security/` ç›®å½•ä¸‹ã€‚

4. **é‡å¯é¡¹ç›®**ã€‚

æˆ–è€…ï¼Œå¯ä»¥é‡‡å–ä»¥ä¸‹æ›¿ä»£æ–¹æ¡ˆï¼š

- **å‡å°‘å¯†é’¥é•¿åº¦**ï¼š
  ```java
  private static byte[] formatData(byte[] data) {
      return DigestUtils.md5(data);
  }
  ```

- **å¯ç”¨æ— é™åˆ¶å¼ºåº¦ç®¡è¾–ç­–ç•¥ï¼ˆé€‚ç”¨äº Java 1.8.0_151 åŠä»¥ä¸Šç‰ˆæœ¬ï¼‰**ï¼š
  - åœ¨ `jre/lib/security` æ–‡ä»¶å¤¹ä¸­æ‰¾åˆ°æ–‡ä»¶ `java.security`ã€‚
  - æ‰¾åˆ°å®šä¹‰ Java å®‰å…¨æ€§å±æ€§ `crypto.policy` çš„è¡Œï¼Œå°†å…¶å€¼ä» `limited` æ”¹ä¸º `unlimited`ï¼š
    ```
    crypto.policy=unlimited
    ```