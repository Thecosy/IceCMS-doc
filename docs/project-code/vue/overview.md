---
sidebar_position: 1
---

# VUEXå¼€å‘æ•™ç¨‹

> æœ¬æ–‡ç”± [ç®€æ‚¦ SimpRead](http://ksria.com/simpread/) è½¬ç ï¼Œ åŸæ–‡åœ°å€ [juejin.cn](https://juejin.cn/post/6928468842377117709)

ä¸ºä»€ä¹ˆè¦åšè¿™ç¯‡æ–‡é›†å‘¢ï¼Ÿå¸‚é¢ä¸Šå…³äº vuex çš„æ•™ç¨‹å¤šå¦‚ç‰›æ¯›ï¼Œç”šè‡³ vuex è¢«æŸäº›å¤§ç¥éƒ½å°è£…å‡ºèŠ±å„¿æ¥äº†ï¼›ä¸€æ–¹é¢æ˜¯æƒ³ä»æœ€ç®€å•æœ€åŸºç¡€çš„åœ°æ–¹å¸¦å¤§å®¶ä½¿ç”¨ä¸€ä¸‹ vuexï¼Œå¦ä¸€æ–¹é¢ä¹Ÿæ˜¯æƒ³è®©è‡ªå·±å¤ä¹ ä¸€ä¸‹ vuexï¼Œå¥½ï¼Œä¸å¤šåºŸè¯äº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ç®€å•å¯¹ vuex ä»‹ç»ä¸€ä¸‹ï¼Œè¿™ç©¶ç«Ÿæ˜¯ä¸ªå•¥ï¼Ÿ

ç¬¬ä¸€æ­¥ï¼Œå¦‚æœä½ æƒ³äº†è§£ä¸€ä¸ªæŠ€æœ¯ï¼Œå°±å»ä»–çš„å®˜ç½‘å»çœ‹ï¼Œå‡†æ²¡é”™ï¼Œè¿›å…¥å®˜ç½‘ï¼Œæ˜ å…¥çœ¼å¸˜çš„å°±æ˜¯ â€œvuex æ˜¯ä»€ä¹ˆâ€ï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4b4fcb1556af49a383be02218f68fe85~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp)

å¦‚å›¾æ‰€ç¤ºï¼Œå®ƒæ˜¯ä¸€ä¸ªç¨‹åºé‡Œé¢çš„**çŠ¶æ€ç®¡ç†æ¨¡å¼**ï¼Œå®ƒæ˜¯**é›†ä¸­å¼**å­˜å‚¨**æ‰€æœ‰**ç»„ä»¶çš„çŠ¶æ€çš„å°ä»“åº“ï¼Œå¹¶ä¸”ä¿æŒæˆ‘ä»¬å­˜å‚¨çš„çŠ¶æ€ä»¥ä¸€ç§**å¯ä»¥é¢„æµ‹**çš„æ–¹å¼å‘ç”Ÿå˜åŒ–ã€‚å¯¹äºå¯ä»¥é¢„æµ‹ï¼Œç°åœ¨æˆ‘ä¸å¤šåšè¯´æ˜ï¼Œç›¸ä¿¡åœ¨çœ‹å®Œè¿™ç¯‡æ–‡ç« ä¹‹åï¼Œä½ å°±ä¼šæœ‰è‡ªå·±çš„ç†è§£ã€‚

ç¬¬ä¸€æ­¥ï¼Œäº†è§£ Vuex
===========

### ğŸ¤¯ æƒ³è±¡ä¸€ä¸ªåœºæ™¯

å¦‚æœä½ çš„é¡¹ç›®é‡Œæœ‰å¾ˆå¤šé¡µé¢ï¼ˆç»„ä»¶ / è§†å›¾ï¼‰ï¼Œé¡µé¢ä¹‹é—´å­˜åœ¨å¤šçº§çš„åµŒå¥—å…³ç³»ï¼Œæ­¤æ—¶ï¼Œè¿™äº›é¡µé¢å‡å¦‚éƒ½éœ€è¦å…±äº«ä¸€ä¸ªçŠ¶æ€çš„æ—¶å€™ï¼Œæ­¤æ—¶å°±ä¼šäº§ç”Ÿä»¥ä¸‹ä¸¤ä¸ªé—®é¢˜ï¼š

*   å¤šä¸ªè§†å›¾ä¾èµ–åŒä¸€ä¸ªçŠ¶æ€
*   æ¥è‡ªä¸åŒè§†å›¾çš„è¡Œä¸ºéœ€è¦å˜æ›´åŒä¸€ä¸ªçŠ¶æ€

### ğŸ¤ª åŠ¨åŠ¨ä½ çš„å°è„‘è¢‹ä½ å°±ä¼šæƒ³åˆ°è§£å†³ä»¥ä¸Šæ–¹æ³•çš„æ–¹æ¡ˆ:

*   å¯¹äºç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œå‡å¦‚æ˜¯å¤šçº§åµŒå¥—å…³ç³»ï¼Œä½ å¯ä»¥ä½¿ç”¨çˆ¶å­ç»„ä»¶ä¼ å‚è¿›è¡Œè§£å†³ï¼Œè™½æœ‰äº›éº»çƒ¦ï¼Œä½†å¥½åœ¨å¯ä»¥è§£å†³ï¼›å¯¹äºå…„å¼Ÿç»„ä»¶æˆ–è€…å…³ç³»æ›´å¤æ‚ç»„ä»¶ä¹‹é—´ï¼Œå°±å¾ˆéš¾åŠäº†ï¼Œè™½ç„¶å¯ä»¥é€šè¿‡å„ç§å„æ ·çš„åŠæ³•è§£å†³ï¼Œå¯å®åœ¨å¾ˆä¸ä¼˜é›…ï¼Œè€Œä¸”ç­‰é¡¹ç›®åšå¤§äº†ï¼Œä»£ç å°±ä¼šå˜æˆå±å±±ï¼Œå®åœ¨ä»¤äººå¿ƒçƒ¦ã€‚
*   å¯¹äºç¬¬äºŒä¸ªé—®é¢˜ï¼Œä½ å¯ä»¥é€šè¿‡çˆ¶å­ç»„ä»¶ç›´æ¥å¼•ç”¨ï¼Œæˆ–è€…é€šè¿‡äº‹ä»¶æ¥å˜æ›´æˆ–è€…åŒæ­¥çŠ¶æ€çš„å¤šä»½æ‹·è´ï¼Œè¿™ç§æ¨¡å¼å¾ˆè„†å¼±ï¼Œå¾€å¾€ä½¿å¾—ä»£ç éš¾ä»¥ç»´æŠ¤ï¼Œè€Œä¸”åŒæ ·ä¼šè®©ä»£ç å˜æˆå±å±±ã€‚

### ğŸ˜‡ æ­¤æ—¶ï¼Œæ—¢ç„¶æ€è€ƒåˆ°äº†è¿™é‡Œï¼Œå¦‚æœæ¢ä¸€ç§æ€è·¯å‘¢ï¼š

*   æŠŠå„ä¸ªç»„ä»¶éƒ½éœ€è¦ä¾èµ–çš„åŒä¸€ä¸ªçŠ¶æ€æŠ½å–å‡ºæ¥ï¼Œåœ¨å…¨å±€ä½¿ç”¨å•ä¾‹æ¨¡å¼è¿›è¡Œç®¡ç†ã€‚
*   åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œä»»ä½•ç»„ä»¶éƒ½å¯ä»¥ç›´æ¥è®¿é—®åˆ°è¿™ä¸ªçŠ¶æ€ï¼Œæˆ–è€…å½“çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰çš„ç»„ä»¶éƒ½è·å¾—æ›´æ–°ã€‚

### ğŸ‘¶ è¿™æ—¶å€™ï¼ŒVuex è¯ç”Ÿäº†ï¼

è¿™å°±æ˜¯ Vuex èƒŒåçš„åŸºæœ¬æ€æƒ³ï¼Œå€Ÿé‰´äº† Fluxã€Reduxã€‚ä¸å…¶ä»–æ¨¡å¼ä¸åŒçš„æ˜¯ï¼ŒVuex æ˜¯ä¸“é—¨ä¸º Vue è®¾è®¡çš„çŠ¶æ€ç®¡ç†åº“ï¼Œä»¥åˆ©ç”¨ Vue.js çš„ç»†ç²’åº¦æ•°æ®å“åº”æœºåˆ¶æ¥è¿›è¡Œé«˜æ•ˆçš„çŠ¶æ€æ›´æ–°ã€‚

### ğŸ˜¨ æ¥ç€ï¼Œä½ å°±ä¼šçœ‹åˆ°ä¸‹é¢è¿™å¼ å®˜ç½‘çš„ vuex ä½¿ç”¨å‘¨æœŸå›¾ï¼ˆçœ‹ä¸æ‡‚æ²¡å…³ç³»ï¼‰ï¼š

![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d7b77fdcf29d410eb74f4872dd9c82fe~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp)

### ğŸ¤© ä»€ä¹ˆæ—¶å€™åº”è¯¥ç”¨ vuex å‘¢ï¼Ÿ

*   è¿™ä¸ªé—®é¢˜å› äººè€Œå¼‚ï¼Œå¦‚æœä½ ä¸éœ€è¦å¼€å‘å¤§å‹çš„å•é¡µåº”ç”¨ï¼Œæ­¤æ—¶ä½ å®Œå…¨æ²¡æœ‰å¿…è¦ä½¿ç”¨ vuexï¼Œæ¯”å¦‚ä½ çš„é¡µé¢å°±ä¸¤ä¸‰ä¸ªï¼Œä½¿ç”¨ vuex åå¢åŠ çš„æ–‡ä»¶æ¯”ä½ ç°åœ¨çš„é¡µé¢è¿˜è¦å¤šï¼Œé‚£å°±æ²¡è¿™ä¸ªå¿…è¦äº†ã€‚
*   å‡å¦‚ä½ çš„é¡¹ç›®è¾¾åˆ°äº†ä¸­å¤§å‹åº”ç”¨çš„è§„æ¨¡ï¼Œæ­¤æ—¶æ‚¨å¾ˆå¯èƒ½ä¼šè€ƒè™‘å¦‚ä½•æ›´å¥½åœ°åœ¨ç»„ä»¶å¤–éƒ¨ç®¡ç†çŠ¶æ€ï¼ŒVuex å°†ä¼šæˆä¸ºè‡ªç„¶è€Œç„¶çš„é€‰æ‹©ã€‚

### ğŸ¤” å¯¹äº vuex çš„ç®€å•ä»‹ç»å°±åˆ°è¿™é‡Œï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä¸€èµ·ç”¨èµ·æ¥å§ï¼

ç¬¬äºŒæ­¥ï¼Œå®‰è£…
======

è¿›å…¥é¡¹ç›®ï¼Œåœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥å®‰è£…æŒ‡ä»¤ï¼Œå›è½¦

`npm install vuex --save`

ç„¶åé…ç½® vuexï¼Œä½¿å…¶å·¥ä½œèµ·æ¥ï¼šåœ¨ src è·¯å¾„ä¸‹åˆ›å»º store æ–‡ä»¶å¤¹ï¼Œç„¶ååˆ›å»º index.js æ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š

```
import Vue from 'vue';
import Vuex from 'vuex';

Vue.use(Vuex);

const store = new Vuex.Store({
  state: {
    // å®šä¹‰ä¸€ä¸ªnameï¼Œä»¥ä¾›å…¨å±€ä½¿ç”¨
    name: 'å¼ ä¸‰',
    // å®šä¹‰ä¸€ä¸ªnumberï¼Œä»¥ä¾›å…¨å±€ä½¿ç”¨
    number: 0,
    // å®šä¹‰ä¸€ä¸ªlistï¼Œä»¥ä¾›å…¨å±€ä½¿ç”¨
    list: [
      { id: 1, name: '111' },
      { id: 2, name: '222' },
      { id: 3, name: '333' },
    ],
  },
});

export default store;


```

ä¿®æ”¹ main.jsï¼š

```
import Vue from 'vue';
import App from './App';
import router from './router';
import store from './store'; // å¼•å…¥æˆ‘ä»¬å‰é¢å¯¼å‡ºçš„storeå¯¹è±¡

Vue.config.productionTip = false;

new Vue({
  el: '#app',
  router,
  store, // æŠŠstoreå¯¹è±¡æ·»åŠ åˆ°vueå®ä¾‹ä¸Š
  components: { App },
  template: '<App/>',
});


```

æœ€åä¿®æ”¹ App.vueï¼š

```
<template>
  <div></div>
</template>

<script>
export default {
  mounted() {
    // ä½¿ç”¨this.$store.state.XXXå¯ä»¥ç›´æ¥è®¿é—®åˆ°ä»“åº“ä¸­çš„çŠ¶æ€
    console.log(this.$store.state.name);
  },
};
</script>


```

æ­¤æ—¶ï¼Œå¯åŠ¨é¡¹ç›®`npm run dev`ï¼Œå³å¯åœ¨æ§åˆ¶å°è¾“å‡ºåˆšæ‰æˆ‘ä»¬å®šä¹‰åœ¨ store ä¸­çš„ name çš„å€¼ã€‚

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/160e64c624e941bdb850c0ce175444e0~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp)

*   ğŸ¤– å®˜æ–¹å»ºè®® 1ï¼š å®˜æ–¹å»ºè®®æˆ‘ä»¬ä»¥ä¸Šæ“ä½œ this.$store.state.XXX æœ€å¥½æ”¾åœ¨è®¡ç®—å±æ€§ä¸­ï¼Œå½“ç„¶ï¼Œæˆ‘ä¹Ÿå»ºè®®ä½ è¿™ä¹ˆä½¿ç”¨ï¼Œè¿™æ ·å¯ä»¥è®©ä½ çš„ä»£ç çœ‹èµ·æ¥æ›´ä¼˜é›…ä¸€äº›ï¼Œå°±åƒè¿™æ ·ï¼š

```
export default {
  mounted() {
    console.log(this.getName);
  },
  computed: {
    getName() {
      return this.$store.state.name;
    },
  },
};


```

æ­¤æ—¶å¯ä»¥å¾—åˆ°å’Œä¸Šé¢ä¸€æ ·çš„æ•ˆæœã€‚

*   ğŸ¤– å®˜æ–¹å»ºè®® 2ï¼š æ˜¯ä¸æ˜¯æ¯æ¬¡éƒ½å†™ this.$store.state.XXX è®©ä½ æ„Ÿåˆ°åŒçƒ¦ï¼Œä½ å®åœ¨ä¸æƒ³å†™è¿™ä¸ªä¸œè¥¿æ€ä¹ˆåŠï¼Œå½“ç„¶æœ‰è§£å†³æ–¹æ¡ˆï¼Œå°±åƒä¸‹é¢è¿™æ ·ï¼š

```
<script>
import { mapState } from 'vuex'; // ä»vuexä¸­å¯¼å…¥mapState
export default {
  mounted() {
    console.log(this.name);
  },
  computed: {
    ...mapState(['name']), // ç»è¿‡è§£æ„åï¼Œè‡ªåŠ¨å°±æ·»åŠ åˆ°äº†è®¡ç®—å±æ€§ä¸­ï¼Œæ­¤æ—¶å°±å¯ä»¥ç›´æ¥åƒè®¿é—®è®¡ç®—å±æ€§ä¸€æ ·è®¿é—®å®ƒ
  },
};
</script>


```

ä½ ç”šè‡³å¯ä»¥åœ¨è§£æ„çš„æ—¶å€™ç»™å®ƒèµ‹åˆ«åï¼Œå–å¤–å·ï¼Œå°±åƒè¿™æ ·ï¼š

```
...mapState({ aliasName: 'name' }),  // èµ‹åˆ«åçš„è¯ï¼Œè¿™é‡Œæ¥æ”¶å¯¹è±¡ï¼Œè€Œä¸æ˜¯æ•°ç»„


```

### ğŸ¤— è‡³æ­¤ï¼Œå®‰è£… vuex å¹¶ä¸”åˆå§‹åŒ–çš„å·¥ä½œå°±ç»“æŸäº†ï¼Œæ­¤æ—¶ä½ å¯ä»¥å¾ˆè½»æ˜“çš„åœ¨é¡¹ç›®çš„ä»»æ„åœ°æ–¹è®¿é—®åˆ°ä»“åº“é‡Œçš„çŠ¶æ€

ç¬¬ä¸‰æ­¥ï¼Œäº†è§£ä¿®é¥°å™¨ï¼šGetter
================

å½“ä½ çœ‹åˆ°è¿™é‡Œçš„æ—¶å€™ï¼Œè¯æ˜ä½ ä¸Šä¸€æ­¥å·²ç»å®Œç¾çš„åˆ›å»ºå¥½ä¸€ä¸ª vue é¡¹ç›®ï¼Œå¹¶ä¸”å°† vuex å®‰è£…äº†è¿›å»ï¼

å¥½ï¼æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä»‹ç»ä¸€ä¸ªè¯»å–æ“ä½œçš„ â€œä¿®é¥°åˆ©å™¨â€ ---Getter

*   ğŸ¤¨ è®¾æƒ³ä¸€ä¸ªåœºæ™¯ï¼Œä½ å·²ç»å°† store ä¸­çš„ name å±•ç¤ºåˆ°é¡µé¢ä¸Šäº†ï¼Œè€Œä¸”æ˜¯å¾ˆå¤šé¡µé¢éƒ½å±•ç¤ºäº†ï¼Œæ­¤æ—¶äº§å“ç»ç†è¿‡æ¥æ‰¾äº‹å„¿ğŸ˜¡ï¼š
    
*   äº§å“ç»ç†ï¼šæ‰€æœ‰çš„ name å‰é¢éƒ½è¦åŠ ä¸Š â€œhelloâ€ï¼
    
*   æˆ‘ï¼šä¸ºä»€ä¹ˆï¼Ÿ
    
*   äº§å“ç»ç†ï¼šæˆ‘æéœ€æ±‚è¿˜éœ€è¦ä¸ºä»€ä¹ˆå—ï¼Ÿ
    
*   æˆ‘ï¼šå¥½ï¼Œæˆ‘åŠ ï¼
    

è¿™æ—¶å€™ï¼Œä½ ç¬¬ä¸€æƒ³åˆ°çš„æ˜¯æ€ä¹ˆåŠ å‘¢ï¼Œemm... åœ¨æ¯ä¸ªé¡µé¢ä¸Šï¼Œä½¿ç”¨ this.$store.state.name è·å–åˆ°å€¼ä¹‹åï¼Œè¿›è¡Œéå†ï¼Œå‰é¢è¿½åŠ  "hello" å³å¯ã€‚

ğŸ¤¦ğŸ»â€â™‚ï¸ é”™ï¼è¿™æ ·å¾ˆä¸å¥½ï¼ŒåŸå› å¦‚ä¸‹ï¼š

*   ç¬¬ä¸€ï¼Œå‡å¦‚ä½ åœ¨ Aã€Bã€C ä¸‰ä¸ªé¡µé¢éƒ½ç”¨åˆ°äº† nameï¼Œé‚£ä¹ˆä½ è¦åœ¨è¿™ Aã€Bã€C ä¸‰ä¸ªé¡µé¢éƒ½ä¿®æ”¹ä¸€éï¼Œå¤šä¸ªé¡µé¢ä½ å°±è¦åŠ å¾ˆå¤šéè¿™ä¸ªæ–¹æ³•ï¼Œé€ æˆä»£ç å†—ä½™ï¼Œå¾ˆä¸å¥½ï¼›
*   ç¬¬äºŒï¼Œå‡å¦‚ä¸‹æ¬¡äº§å“ç»ç†è®©ä½ æŠŠ â€œhelloâ€ æ”¹æˆ â€œfuckâ€ çš„æ—¶å€™ï¼Œä½ åˆå¾—æŠŠä¸‰ä¸ªé¡µé¢éƒ½æ”¹ä¸€éï¼Œè¿™æ—¶å€™ä½ åªèƒ½æŠ½è‡ªå·±çš„è„¸äº†...

ğŸ‘ğŸ» å¸å–ä¸Šé¢çš„æ•™è®­ï¼Œä½ ä¼šæœ‰ä¸€ä¸ªæ–°çš„æ€è·¯ï¼šæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨ store ä¸­å¯¹ name è¿›è¡Œä¸€äº›æ“ä½œæˆ–è€…åŠ å·¥ï¼Œä»æºå¤´è§£å†³é—®é¢˜ï¼é‚£ä¹ˆå…·ä½“åº”è¯¥æ€ä¹ˆå†™å‘¢ï¼Ÿè¿™æ—¶å€™ï¼Œæœ¬æ¬¡å°†è¦ä»‹ç»çš„è¿™ä¸ª Getter åˆ©å™¨é—ªäº®ç™»åœºï¼

ğŸ¤¡ æ€ä¹ˆç”¨å‘¢ï¼Ÿä¸åºŸè¯ï¼Œshow codeï¼

é¦–å…ˆï¼Œåœ¨ store å¯¹è±¡ä¸­å¢åŠ  getters å±æ€§

```
import Vue from 'vue';
import Vuex from 'vuex';

Vue.use(Vuex);

const store = new Vuex.Store({
  state: {
    name: 'å¼ ä¸‰',
    number: 0,
    list: [
      { id: 1, name: '111' },
      { id: 2, name: '222' },
      { id: 3, name: '333' },
    ],
  },
  // åœ¨storeå¯¹è±¡ä¸­å¢åŠ getterså±æ€§
  getters: {
    getMessage(state) {
      // è·å–ä¿®é¥°åçš„nameï¼Œç¬¬ä¸€ä¸ªå‚æ•°stateä¸ºå¿…è¦å‚æ•°ï¼Œå¿…é¡»å†™åœ¨å½¢å‚ä¸Š
      return `hello${state.name}`;
    },
  },
});

export default store;


```

åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ï¼š

```
export default {
  mounted() {
    // æ³¨æ„ä¸æ˜¯$store.stateäº†ï¼Œè€Œæ˜¯$store.getters
    console.log(this.$store.state.name);
    console.log(this.$store.getters.getMessage);
  },
};


```

ç„¶åæŸ¥çœ‹æ§åˆ¶å°ï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c3e26092fc444753a0904e527af8ba47~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp)

æ²¡æœ‰é—®é¢˜çš„

ğŸ¤– å®˜æ–¹å»ºè®®ï¼š æ˜¯ä¸æ˜¯æ¯æ¬¡éƒ½å†™ this.$store.getters.XXX è®©ä½ æ„Ÿåˆ°åŒçƒ¦ï¼Œä½ å®åœ¨ä¸æƒ³å†™è¿™ä¸ªä¸œè¥¿æ€ä¹ˆåŠï¼Œå½“ç„¶æœ‰è§£å†³æ–¹æ¡ˆï¼Œå®˜æ–¹å»ºè®®æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ mapGetters å»è§£æ„åˆ°è®¡ç®—å±æ€§ä¸­ï¼Œå°±åƒä½¿ç”¨ mapState ä¸€æ ·ï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨ this è°ƒç”¨äº†ï¼Œå°±åƒä¸‹é¢è¿™æ ·ï¼š

```
<script>
import { mapState, mapGetters } from 'vuex';
export default {
  mounted() {
    console.log(this.name);
    console.log(this.getMessage);
  },
  computed: {
    ...mapState(['name']),
    ...mapGetters(['getMessage']),
  },
};
</script>


```

æ­¤æ—¶å¯ä»¥å¾—åˆ°å’Œä¹‹å‰ä¸€æ ·çš„æ•ˆæœã€‚

å½“ç„¶ï¼Œå’Œ mapState ä¸€æ ·ä½ ä¹Ÿå¯ä»¥å–åˆ«åï¼Œå–å¤–å·ï¼Œå°±åƒä¸‹é¢è¿™æ ·ï¼š

```
...mapGetters({ aliasName: 'getMessage' }),  // èµ‹åˆ«åçš„è¯ï¼Œè¿™é‡Œæ¥æ”¶å¯¹è±¡ï¼Œè€Œä¸æ˜¯æ•°ç»„


```

ğŸ¤— OKï¼Œå½“ä½ çœ‹åˆ°è¿™é‡Œï¼Œä½ å·²ç»æˆåŠŸçš„æŠŠ Getter ç”¨èµ·æ¥äº†ï¼Œä½ ä¹Ÿèƒ½æ˜ç™½åœ¨ä»€ä¹ˆæ—¶å€™åº”è¯¥ç”¨åˆ° gettersï¼Œä½ å¯ä»¥é€šè¿‡è®¡ç®—å±æ€§è®¿é—®ï¼ˆç¼“å­˜ï¼‰ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æ–¹æ³•è®¿é—®ï¼ˆä¸ç¼“å­˜ï¼‰ï¼Œä½ ç”šè‡³å¯ä»¥åœ¨ getters çš„æ–¹æ³•é‡Œé¢å†è°ƒç”¨ getters æ–¹æ³•ï¼Œå½“ç„¶ä½ ä¹Ÿå®ç°äº†åƒ state é‚£æ ·ï¼Œä½¿ç”¨ mapGetters è§£æ„åˆ°è®¡ç®—å±æ€§ä¸­ï¼Œè¿™æ ·ä½ å°±å¯ä»¥å¾ˆæ–¹ä¾¿çš„ä½¿ç”¨ getters å•¦ï¼

ğŸ˜ è¯»å–å€¼çš„æ“ä½œæˆ‘ä»¬æœ‰ â€œåŸç”Ÿè¯»ï¼ˆstateï¼‰â€ å’Œ â€œä¿®é¥°è¯»ï¼ˆgettersï¼‰â€ï¼Œæ¥ä¸‹æ¥å°±è¦ä»‹ç»æ€ä¹ˆä¿®æ”¹å€¼äº†ï¼

ç¬¬å››æ­¥ï¼Œäº†è§£å¦‚ä½•ä¿®æ”¹å€¼ï¼šMutation
====================

ğŸ¤— OKï¼é¦–å…ˆæ­å–œä½ çœ‹åˆ°äº†è¿™é‡Œï¼Œè‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»æˆåŠŸè®¿é—®åˆ°äº† store é‡Œé¢çš„å€¼ï¼Œæ¥ä¸‹æ¥æˆ‘æ¥ä»‹ç»ä¸€ä¸‹æ€ä¹ˆä¿®æ”¹ state é‡Œé¢çš„å€¼ã€‚

*   è¯´åˆ°ä¿®æ”¹å€¼ï¼Œæœ‰çš„åŒå­¦å°±ä¼šæƒ³åˆ°è¿™æ ·å†™ï¼š

```
// é”™è¯¯ç¤ºèŒƒ
this.$store.state.XXX = XXX;


```

ğŸ¤ª é¦–å…ˆï¼Œè¿™é‡Œæˆ‘å…ˆæ˜ç¡®çš„è¯´æ˜ï¼šè¿™æ˜¯é”™è¯¯çš„å†™æ³•ï¼è¿™æ˜¯é”™è¯¯çš„å†™æ³•ï¼è¿™æ˜¯é”™è¯¯çš„å†™æ³•ï¼

ä¸ºä»€ä¹ˆä¸Šé¢æ˜¯é”™è¯¯çš„å†™æ³•ï¼Ÿå› ä¸ºè¿™ä¸ª store ä»“åº“æ¯”è¾ƒå¥‡æ€ªï¼Œä½ å¯ä»¥éšä¾¿æ‹¿ï¼Œä½†æ˜¯ä½ ä¸èƒ½éšä¾¿æ”¹ï¼Œæˆ‘ä¸¾ä¸ªä¾‹å­ï¼š

ğŸ¤” å‡å¦‚ä½ æ‰“å¼€å¾®ä¿¡æœ‹å‹åœˆï¼Œçœ‹åˆ°ä½ çš„å¥½å‹å‘äº†åŠ¨æ€ï¼Œä½†æ˜¯åŠ¨æ€é‡Œæœ‰ä¸ªé”™åˆ«å­—ï¼Œä½ è¦æ€ä¹ˆåŠå‘¢ï¼Ÿä½ å¯ä»¥å¸®ä»–æ”¹æ‰å—ï¼Ÿå½“ç„¶ä¸å¯ä»¥ï¼æˆ‘ä»¬åªèƒ½é€šçŸ¥ä»–æœ¬äººå»ä¿®æ”¹ï¼Œå› ä¸ºæ˜¯åˆ«äººçš„æœ‹å‹åœˆï¼Œä½ æ˜¯æ— æƒæ“ä½œçš„ï¼Œåªæœ‰ä»–è‡ªå·±æ‰èƒ½æ“ä½œï¼ŒåŒç†ï¼Œåœ¨ vuex ä¸­ï¼Œæˆ‘ä»¬ä¸èƒ½ç›´æ¥ä¿®æ”¹ä»“åº“é‡Œçš„å€¼ï¼Œå¿…é¡»ç”¨ vuex è‡ªå¸¦çš„æ–¹æ³•å»ä¿®æ”¹ï¼Œè¿™ä¸ªæ—¶å€™ï¼ŒMutation é—ªäº®ç™»åœºäº†ï¼

ğŸ˜¬ æŠŠé—®é¢˜è§£é‡Šæ¸…æ¥šä¹‹åï¼Œæˆ‘ä»¬å‡†å¤‡å®Œæˆä¸€ä¸ªæ•ˆæœï¼šæˆ‘ä»¬å…ˆè¾“å‡º state ä¸­çš„ number çš„é»˜è®¤å€¼ 0ï¼Œç„¶åæˆ‘ä»¬åœ¨ vue ç»„ä»¶é‡Œé€šè¿‡æäº¤ Mutations æ”¹å˜ number çš„é»˜è®¤å€¼ 0ï¼Œæ”¹æˆæˆ‘ä»¬æƒ³ä¿®æ”¹çš„å€¼ï¼Œç„¶åå†è¾“å‡ºå‡ºæ¥ï¼Œè¿™æ ·å°±å¯ä»¥ç®€å•ç»ƒä¹ æ€ä¹ˆä½¿ç”¨ Mutations äº†ã€‚ä¸è¯´åºŸè¯ï¼Œä¸Šä»£ç ã€‚

*   ä¿®æ”¹ store/index.js

```
import Vue from 'vue';
import Vuex from 'vuex';

Vue.use(Vuex);

const store = new Vuex.Store({
  state: {
    name: 'å¼ ä¸‰',
    number: 0,
  },
  mutations: {
    // å¢åŠ nutationså±æ€§
    setNumber(state) {
      // å¢åŠ ä¸€ä¸ªmutationsçš„æ–¹æ³•ï¼Œæ–¹æ³•çš„ä½œç”¨æ˜¯è®©numä»0å˜æˆ5ï¼Œstateæ˜¯å¿…é¡»é»˜è®¤å‚æ•°
      state.number = 5;
    },
  },
});

export default store;


```

*   ä¿®æ”¹ App.vue

```
<script>
export default {
  mounted() {
    console.log(`æ—§å€¼ï¼š${this.$store.state.number}`);
    this.$store.commit('setNumber');
    console.log(`æ–°å€¼ï¼š${this.$store.state.number}`);
  },
};
</script>


```

*   è¿è¡Œé¡¹ç›®ï¼ŒæŸ¥çœ‹æ§åˆ¶å°ï¼š

![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ec40d56e76e349ad935ee50ef1211cd8~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp)

*   ğŸ¤¡ ä»¥ä¸Šæ˜¯ç®€å•å®ç° mutations çš„æ–¹æ³•ï¼Œæ˜¯æ²¡æœ‰ä¼ å‚çš„ï¼Œå¦‚æœæˆ‘ä»¬æƒ³ä¼ ä¸å›ºå®šçš„å‚æ•°æ€ä¹ˆåŠï¼Ÿæ¥ä¸‹æ¥æ•™ä½ è§£å†³
    
*   ä¿®æ”¹ store/index.js
    

```
import Vue from 'vue';
import Vuex from 'vuex';

Vue.use(Vuex);

const store = new Vuex.Store({
  state: {
    name: 'å¼ ä¸‰',
    number: 0,
  },
  mutations: {
    setNumber(state) {
      state.number = 5;
    },
    setNumberIsWhat(state, number) {
      // å¢åŠ ä¸€ä¸ªå¸¦å‚æ•°çš„mutationsæ–¹æ³•
      state.number = number;
    },
  },
});

export default store;


```

*   ä¿®æ”¹ App.vue

```
<script>
export default {
  mounted() {
    console.log(`æ—§å€¼ï¼š${this.$store.state.number}`);
    this.$store.commit('setNumberIsWhat', 666);
    console.log(`æ–°å€¼ï¼š${this.$store.state.number}`);
  },
};
</script>


```

*   è¿è¡Œé¡¹ç›®ï¼ŒæŸ¥çœ‹æ§åˆ¶å°ï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0241f71bc47048178b80dff9cf32df8f~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp)

æ²¡æœ‰é—®é¢˜ï¼

*   æ³¨æ„ï¼šä¸Šé¢çš„è¿™ç§ä¼ å‚çš„æ–¹å¼è™½ç„¶å¯ä»¥è¾¾åˆ°ç›®çš„ï¼Œä½†æ˜¯å¹¶ä¸æ¨èï¼Œå®˜æ–¹å»ºè®®ä¼ é€’ä¸€ä¸ªå¯¹è±¡è¿›å»ï¼Œè¿™æ ·çœ‹èµ·æ¥æ›´ç¾è§‚ï¼Œå¯¹è±¡çš„åå­—ä½ å¯ä»¥éšæ„å‘½åï¼Œä½†æˆ‘ä»¬ä¸€èˆ¬å‘½åä¸º payloadï¼Œä»£ç å¦‚ä¸‹ï¼š
    
*   ä¿®æ”¹ store/index.js
    

```
mutations: {
    setNumber(state) {
      state.number = 5;
    },
    setNumberIsWhat(state, payload) {
      // å¢åŠ ä¸€ä¸ªå¸¦å‚æ•°çš„mutationsæ–¹æ³•ï¼Œå¹¶ä¸”å®˜æ–¹å»ºè®®payloadä¸ºä¸€ä¸ªå¯¹è±¡
      state.number = payload.number;
    },
  },


```

*   ä¿®æ”¹ App.vue

```
<script>
export default {
  mounted() {
    console.log(`æ—§å€¼ï¼š${this.$store.state.number}`);
    this.$store.commit('setNumberIsWhat', { number: 666 }); // è°ƒç”¨çš„æ—¶å€™ä¹Ÿéœ€è¦ä¼ é€’ä¸€ä¸ªå¯¹è±¡
    console.log(`æ–°å€¼ï¼š${this.$store.state.number}`);
  },
};
</script>


```

*   æ­¤æ—¶å¯ä»¥å¾—åˆ°å’Œä¹‹å‰ä¸€æ ·çš„æ•ˆæœï¼Œå¹¶ä¸”ä»£ç æ›´åŠ ç¾è§‚ï¼

`ğŸ˜± è¿™é‡Œè¯´ä¸€æ¡é‡è¦åŸåˆ™ï¼šMutationsé‡Œé¢çš„å‡½æ•°å¿…é¡»æ˜¯åŒæ­¥æ“ä½œï¼Œä¸èƒ½åŒ…å«å¼‚æ­¥æ“ä½œï¼ï¼ˆåˆ«æ€¥ï¼Œåé¢ä¼šè®²åˆ°å¼‚æ­¥ï¼‰`

`ğŸ˜± è¿™é‡Œè¯´ä¸€æ¡é‡è¦åŸåˆ™ï¼šMutationsé‡Œé¢çš„å‡½æ•°å¿…é¡»æ˜¯åŒæ­¥æ“ä½œï¼Œä¸èƒ½åŒ…å«å¼‚æ­¥æ“ä½œï¼ï¼ˆåˆ«æ€¥ï¼Œåé¢ä¼šè®²åˆ°å¼‚æ­¥ï¼‰`

`ğŸ˜± è¿™é‡Œè¯´ä¸€æ¡é‡è¦åŸåˆ™ï¼šMutationsé‡Œé¢çš„å‡½æ•°å¿…é¡»æ˜¯åŒæ­¥æ“ä½œï¼Œä¸èƒ½åŒ…å«å¼‚æ­¥æ“ä½œï¼ï¼ˆåˆ«æ€¥ï¼Œåé¢ä¼šè®²åˆ°å¼‚æ­¥ï¼‰`

å¥½çš„ï¼Œè®°ä½è¿™ä¸ªé‡è¦åŸåˆ™ï¼Œæˆ‘ä»¬å†è¯´ä¸€ä¸ªå°æŠ€å·§ï¼š

*   ğŸ¤– å®˜æ–¹å»ºè®®ï¼šå°±åƒæœ€å¼€å§‹çš„ mapState å’Œ mapGetters ä¸€æ ·ï¼Œæˆ‘ä»¬åœ¨ç»„ä»¶ä¸­å¯ä»¥ä½¿ç”¨ mapMutations ä»¥ä»£æ›¿ this.$store.commit('XXX')ï¼Œæ˜¯ä¸æ˜¯å¾ˆæ–¹ä¾¿å‘¢ï¼Ÿ

```
<script>
import { mapMutations } from 'vuex';
export default {
  mounted() {
    this.setNumberIsWhat({ number: 999 });
  },
  methods: {
    // æ³¨æ„ï¼ŒmapMutationsæ˜¯è§£æ„åˆ°methodsé‡Œé¢çš„ï¼Œè€Œä¸æ˜¯è®¡ç®—å±æ€§äº†
    ...mapMutations(['setNumberIsWhat']),
  },
};
</script>


```

*   æ­¤æ—¶å¯ä»¥å¾—åˆ°å’Œä¹‹å‰ä¸€æ ·çš„æ•ˆæœï¼Œå¹¶ä¸”ä»£ç åˆç¾è§‚äº†ä¸€ç‚¹ï¼
    
*   å½“ç„¶ä½ ä¹Ÿå¯ä»¥ç»™å®ƒå«åˆ«åï¼Œå–å¤–å·ï¼Œå°±åƒè¿™æ ·ï¼š
    

```
methods: {
  ...mapMutations({ setNumberIsAlias: 'setNumberIsWhat' }), // èµ‹åˆ«åçš„è¯ï¼Œè¿™é‡Œæ¥æ”¶å¯¹è±¡ï¼Œè€Œä¸æ˜¯æ•°ç»„
},


```

*   ğŸ¤” OKï¼Œå…³äº Mutation çš„ä»‹ç»å¤§è‡´å°±æ˜¯è¿™æ ·ï¼Œå¦å¤–ä½ ä¹ŸæŒæ¡äº†åœ¨å®šä¹‰ mutations æ–¹æ³•çš„æ—¶å€™æœ‰æ— å‚æ•°åº”è¯¥æ€ä¹ˆå†™ï¼›å¹¶ä¸”å¬å–äº†å®˜æ–¹å»ºè®®ï¼Œä½¿ç”¨ mapMutations è§£æ„åˆ°ä½ çš„ç»„ä»¶å†…éƒ¨çš„ methods é‡Œï¼Œè¿™æ ·ä½ å°±å¯ä»¥å¾ˆç®€å•çš„ä½¿ç”¨ mutations æ–¹æ³•å•¦ï¼
    
*   ğŸ¤ª ä¸Šé¢æåˆ°ï¼ŒMutations åªèƒ½è¿›è¡ŒåŒæ­¥æ“ä½œï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬é©¬ä¸Šå¼€å§‹ä¸‹ä¸€èŠ‚ï¼Œçœ‹çœ‹ä½¿ç”¨ Actions è¿›è¡Œå¼‚æ­¥æ“ä½œçš„æ—¶å€™åº”è¯¥æ³¨æ„ä»€ä¹ˆï¼
    

ç¬¬äº”æ­¥ï¼Œäº†è§£å¼‚æ­¥æ“ä½œï¼šActions
==================

ğŸ˜† OKï¼æœ¬èŠ‚æˆ‘ä»¬æ¥å­¦ä¹ ä½¿ç”¨ Actionsï¼ŒActions å­˜åœ¨çš„æ„ä¹‰æ˜¯å‡è®¾ä½ åœ¨ä¿®æ”¹ state çš„æ—¶å€™æœ‰å¼‚æ­¥æ“ä½œï¼Œvuex ä½œè€…ä¸å¸Œæœ›ä½ å°†å¼‚æ­¥æ“ä½œæ”¾åœ¨ Mutations ä¸­ï¼Œæ‰€ä»¥å°±ç»™ä½ è®¾ç½®äº†ä¸€ä¸ªåŒºåŸŸï¼Œè®©ä½ æ”¾å¼‚æ­¥æ“ä½œï¼Œè¿™å°±æ˜¯ Actions

ğŸ˜› æˆ‘ä»¬ç›´æ¥ä¸Šä¸€ä¸ªä»£ç 

*   ä¿®æ”¹ store/index.js

```
const store = new Vuex.Store({
  state: {
    name: 'å¼ ä¸‰',
    number: 0,
  },
  mutations: {
    setNumberIsWhat(state, payload) {
      state.number = payload.number;
    },
  },
  actions: {
    // å¢åŠ actionså±æ€§
    setNum(content) {
      // å¢åŠ setNumæ–¹æ³•ï¼Œé»˜è®¤ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯contentï¼Œå…¶å€¼æ˜¯å¤åˆ¶çš„ä¸€ä»½store
      return new Promise(resolve => {
        // æˆ‘ä»¬æ¨¡æ‹Ÿä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œ1ç§’åä¿®æ”¹numberä¸º888
        setTimeout(() => {
          content.commit('setNumberIsWhat', { number: 888 });
          resolve();
        }, 1000);
      });
    },
  },
});


```

*   ä¿®æ”¹ App.vue

```
async mounted() {
  console.log(`æ—§å€¼ï¼š${this.$store.state.number}`);
  await this.$store.dispatch('setNum');
  console.log(`æ–°å€¼ï¼š${this.$store.state.number}`);
},


```

*   è¿è¡Œé¡¹ç›®ï¼ŒæŸ¥çœ‹æ§åˆ¶å°ï¼š

![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d76d3befa96146fd8615d61edc134c92~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp)

ğŸ¤“ çœ‹äº†ä¾‹å­ï¼Œæ˜¯ä¸æ˜¯æ˜ç™½äº†ï¼Œaction å°±æ˜¯å»æäº¤ mutation çš„ï¼Œä»€ä¹ˆå¼‚æ­¥æ“ä½œéƒ½åœ¨ action ä¸­æ¶ˆåŒ–äº†ï¼Œæœ€åå†å»æäº¤ mutation çš„ã€‚

ğŸ˜¼ å½“ç„¶ï¼Œä½ å¯ä»¥æ¨¡ä»¿ mutation è¿›è¡Œä¼ å‚ï¼Œå°±åƒä¸‹é¢è¿™æ ·ï¼š

*   ä¿®æ”¹ store/index.js

```
actions: {
  setNum(content, payload) {
    // å¢åŠ payloadå‚æ•°
    return new Promise(resolve => {
      setTimeout(() => {
        content.commit('setNumberIsWhat', { number: payload.number });
        resolve();
      }, 1000);
    });
  },
},


```

*   ä¿®æ”¹ App.vue

```
async mounted() {
  console.log(`æ—§å€¼ï¼š${this.$store.state.number}`);
  await this.$store.dispatch('setNum', { number: 611 });
  console.log(`æ–°å€¼ï¼š${this.$store.state.number}`);
},


```

*   è¿è¡Œé¡¹ç›®ï¼ŒæŸ¥çœ‹æ§åˆ¶å°

![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/106313d086c042628651e5f593be35c2~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp)

æ²¡æœ‰ä»»ä½•é—®é¢˜ï¼

*   ğŸ¤– å®˜æ–¹å»ºè®® 1ï¼šä½ å¦‚æœä¸æƒ³ä¸€ç›´ä½¿ç”¨ this.$store.dispatch('XXX') è¿™æ ·çš„å†™æ³•è°ƒç”¨ actionï¼Œä½ å¯ä»¥é‡‡ç”¨ mapActions çš„æ–¹å¼ï¼ŒæŠŠç›¸å…³çš„ actions è§£æ„åˆ° methods ä¸­ï¼Œç”¨ this ç›´æ¥è°ƒç”¨ï¼š

```
<script>
import { mapActions } from 'vuex';
export default {
  methods: {
    ...mapActions(['setNum']), // å°±åƒè¿™æ ·ï¼Œè§£æ„åˆ°methodsä¸­
  },
  async mounted() {
    await this.setNum({ number: 123 }); // ç›´æ¥è¿™æ ·è°ƒç”¨å³å¯
  },
};
</script>


```

å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥å–åˆ«åï¼Œå–å¤–å·ï¼Œå°±åƒä¸‹é¢è¿™æ ·ï¼š

```
...mapActions({ setNumAlias: 'setNum' }),   // èµ‹åˆ«åçš„è¯ï¼Œè¿™é‡Œæ¥æ”¶å¯¹è±¡ï¼Œè€Œä¸æ˜¯æ•°ç»„


```

*   ğŸ¤– å®˜æ–¹å»ºè®® 2ï¼šåœ¨ store/index.js ä¸­çš„ actions é‡Œé¢ï¼Œæ–¹æ³•çš„å½¢å‚å¯ä»¥ç›´æ¥å°† commit è§£æ„å‡ºæ¥ï¼Œè¿™æ ·å¯ä»¥æ–¹ä¾¿åç»­æ“ä½œï¼š

```
actions: {
  setNum({ commit }) {
    // ç›´æ¥å°†contentç»“æ„æ‰ï¼Œè§£æ„å‡ºcommitï¼Œä¸‹é¢å°±å¯ä»¥ç›´æ¥è°ƒç”¨äº†
    return new Promise(resolve => {
      setTimeout(() => {
        commit('XXXX'); // ç›´æ¥è°ƒç”¨
        resolve();
      }, 1000);
    });
  },
},


```

*   ğŸ¤  OKï¼Œçœ‹åˆ°è¿™é‡Œï¼Œä½ åº”è¯¥æ˜ç™½ action åœ¨ vuex çš„ä½ç½®äº†å§ï¼Œä»€ä¹ˆæ—¶å€™è¯¥ç”¨ actionï¼Œä»€ä¹ˆæ—¶å€™ä¸ç”¨å®ƒï¼Œä½ è‚¯å®šæœ‰äº†è‡ªå·±çš„åˆ¤æ–­ï¼Œæœ€ä¸»è¦çš„åˆ¤æ–­æ¡ä»¶å°±æ˜¯æˆ‘è¦åšçš„æ“ä½œæ˜¯ä¸æ˜¯å¼‚æ­¥ï¼Œè¿™ä¹Ÿæ˜¯ action å­˜åœ¨çš„æœ¬è´¨ã€‚å½“ç„¶ï¼Œä½ ä¸è¦å°† action å’Œ mutation æ··ä¸ºä¸€è°ˆï¼Œaction å…¶å®å°±æ˜¯ mutation çš„ä¸Šä¸€çº§ï¼Œåœ¨ action è¿™é‡Œå¤„ç†å®Œå¼‚æ­¥çš„ä¸€äº›æ“ä½œåï¼Œåé¢çš„ä¿®æ”¹ state å°±äº¤ç»™ mutation å»åšäº†ã€‚

ç¬¬å…­æ­¥ï¼ŒæŒ‰å±æ€§è¿›è¡Œæ‹†åˆ†
===========

ğŸ¤¯ æ¥ä¸‹æ¥æˆ‘ä»¬æƒ³è±¡ä¸€ä¸‹ï¼Œç›®å‰æˆ‘ä»¬ä»‹ç»çš„ store/index.js é‡Œé¢çš„å†…å®¹æ˜¯éå¸¸å°‘çš„ï¼Œå¦‚æœä½ æ˜¯ä¸€ä¸ªç¨å¾®æœ‰äº›è§„æ ¼çš„é¡¹ç›®ï¼Œé‚£ä¹ˆä½ å°†ä¼šå¾—åˆ°ä¸€ä¸ªæˆç™¾ä¸Šåƒè¡Œçš„ index.jsï¼Œç„¶åæŸ¥æ‰¾ä¸€äº›ä¸œè¥¿å°±ä¼šéå¸¸è´¹åŠ²ï¼Œæˆ‘ä»¬å»ºè®®ä½ çš„ä¸€ä¸ªæ–‡ä»¶å†…çš„è¡Œæ•°å°½é‡ä¸è¦è¶…è¿‡ 200 è¡Œï¼Œä¸ç„¶å¯¹äºè°ƒè¯•æ¥è¯´æ²¡æœ‰å¥½å¤„ã€‚æ—¢ç„¶é—®é¢˜å‡ºæ¥äº†ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹æ€ä¹ˆæ‹†åˆ†ä¸€ä¸‹ã€‚

ğŸ¤’ æˆ‘ä»¬çœ‹åˆ°ï¼Œä¸€ä¸ª store/index.js é‡Œé¢å¤§è‡´åŒ…å« state/getters/mutations/actions è¿™å››ä¸ªå±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥å½»åº•ç‚¹ï¼Œindex.js é‡Œé¢å°±ä¿æŒè¿™ä¸ªæ¶å­ï¼ŒæŠŠé‡Œé¢çš„å†…å®¹å››æ•£åˆ°å…¶ä»–æ–‡ä»¶ä¸­ã€‚

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/dc39e92fcf7242d78da6329d64ce1d44~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?)

äºæ˜¯æˆ‘ä»¬å¯ä»¥è¿™æ ·æ‹†åˆ†ï¼š

æ–°å»ºå››ä¸ªæ–‡ä»¶ï¼Œåˆ†åˆ«æ˜¯`state.js` `getters.js` `mutations.js` `actions.js`ï¼š

![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d9443814df5e48579e1bac65e48a22f4~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?)

*   1.  æ‹†å‡ºæ¥`state`æ”¾åˆ°`state.js`ä¸­ï¼š

```
// state.js

export const state = {
  name: 'å¼ ä¸‰',
  number: 0,
  list: [
    { id: 1, name: '111' },
    { id: 2, name: '222' },
    { id: 3, name: '333' },
  ],
};


```

*   2.  æ‹†å‡ºæ¥`getters`æ”¾åˆ°`getters.js`ä¸­ï¼š

```
// getters.js

export const getters = {
  getMessage(state) {
    return `hello${state.name}`;
  },
};


```

*   3.  æ‹†å‡ºæ¥`mutations`æ”¾åˆ°`mutations.js`ä¸­ï¼š

```
// mutations.js

export const mutations = {
  setNumber(state) {
    state.number = 5;
  },
};


```

*   4.  æ‹†å‡ºæ¥`actions`æ”¾åˆ°`actions.js`ä¸­ï¼š

```
// actions.js

export const actions = {
  setNum(content) {
    return new Promise(resolve => {
      setTimeout(() => {
        content.commit('setNumberIsWhat', { number: 888 });
        resolve();
      }, 1000);
    });
  },
};


```

5.  ç»„è£…åˆ°ä¸»æ–‡ä»¶é‡Œé¢ï¼š

```
import Vue from 'vue';
import Vuex from 'vuex';
import { state } from './state'; // å¼•å…¥ state
import { getters } from './getters'; // å¼•å…¥ getters
import { mutations } from './mutations'; // å¼•å…¥ mutations
import { actions } from './actions'; // å¼•å…¥ actions

Vue.use(Vuex);

const store = new Vuex.Store({
  state: state,
  getters: getters,
  mutations: mutations,
  actions: actions,
});

// å¯ä»¥ç®€å†™æˆä¸‹é¢è¿™æ ·ï¼š

// const store = new Vuex.Store({ state, getters, mutations, actions });

export default store;


```

ğŸ¤“ ä»¥ä¸Šå°±æ˜¯ç®€å•çš„è¿›è¡Œäº†æŒ‰å±æ€§è¿›è¡Œæ‹†åˆ† store é‡Œé¢çš„ä»£ç ï¼Œè¿™æ ·å°±æ¯”è¾ƒæ¸…æ™°äº†å“ˆï¼Œä½ éœ€è¦åŠ ä»€ä¹ˆå°±å»å“ªé‡ŒåŠ ï¼Œå¤§å®¶å„å¹²å„çš„ï¼Œäº’ä¸å½±å“ã€‚

å½“ç„¶ï¼Œä½ å®Œå…¨å¯ä»¥ä¸è¿™ä¹ˆåšï¼Œå¼•ç”¨å®˜æ–¹æ–‡æ¡£ä¸­çš„ä¸€å¥è¯ï¼Œâ€œ**éœ€è¦å¤šäººåä½œçš„å¤§å‹é¡¹ç›®ä¸­ï¼Œè¿™ä¼šå¾ˆæœ‰å¸®åŠ©ã€‚ä½†å¦‚æœä½ ä¸å–œæ¬¢ï¼Œä½ å®Œå…¨å¯ä»¥ä¸è¿™æ ·åš**â€ã€‚

ç¬¬ä¸ƒæ­¥ï¼ŒæŒ‰åŠŸèƒ½è¿›è¡Œæ‹†åˆ† - Module
====================

ğŸ˜œ ä¸Šé¢æˆ‘ä»¬ä»‹ç»å¦‚ä½•æ‹†åˆ†é¡¹ç›®ï¼Œé‡‡ç”¨çš„æ˜¯æŒ‰**å±æ€§**çš„æ–¹å¼å»æ‹†åˆ†ï¼Œå°† getters/actions/mutations ç­‰å±æ€§æ‹†åˆ†åˆ°ä¸åŒçš„æ–‡ä»¶ä¸­ã€‚

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä»‹ç»ä¸€ä¸‹æŒ‰å¦å¤–çš„ä¸€ä¸ªç»´åº¦å»æ‹†åˆ†æˆ‘ä»¬çš„ storeï¼Œâ€˜æŒ‰**åŠŸèƒ½**â€™ï¼ŒæŒ‰åŠŸèƒ½æ‹†åˆ†çš„è¯ï¼Œå°±æ˜¯æˆ‘ä»¬çš„æ ‡é¢˜ **Module(æ¨¡å—)** ã€‚

ğŸ¤– æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹å®˜æ–¹æ–‡æ¡£æ˜¯æ€ä¹ˆä»‹ç» Module çš„ï¼š

![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5bec544ce0784eedabd4a9c307bcd362~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?)

*   çœ‹äº†å›¾ä¸­çš„æè¿°ï¼Œä½ æˆ–è®¸å·²ç»åŒºåˆ†äº†è¿™é‡Œä½¿ç”¨çš„**æŒ‰åŠŸèƒ½æ‹†åˆ† Module** å’Œæˆ‘ä»¬ä¸Šæ¬¡ä»‹ç»çš„**æŒ‰å±æ€§æ‹†åˆ†**çš„å¼‚åŒäº†ï¼›å°±åƒå›¾ä¸­çš„åœºæ™¯ä¸€æ ·ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªæ€» storeï¼Œåœ¨è¿™é‡Œé¢æ ¹æ®ä¸åŒçš„åŠŸèƒ½ï¼Œæˆ‘ä»¬åŠ äº†ä¸¤ä¸ªä¸åŒçš„ storeï¼Œæ¯ä¸ª store é‡Œé¢ç»´æŠ¤è‡ªå·±çš„ stateï¼Œä»¥åŠè‡ªå·±çš„ actions/mutations/gettersã€‚
    
*   ğŸ¤¡ ä¸è¯´åºŸè¯ï¼Œæˆ‘ä»¬ç”¨ä»£ç å®ç°ä¸€ä¸‹
    
*   1.  æˆ‘ä»¬åœ¨ä¹‹å‰çš„ store ä¸Šï¼Œå¢åŠ ä¸€ä¸ªæ–°çš„ä»“åº“ store2ï¼Œä¸»è¦ä»£ç å¦‚ä¸‹ï¼š

```
// store2.js

const store2 = {
  state: {
    name: 'æˆ‘æ˜¯store2',
  },
  mutations: {},
  getters: {},
  actions: {},
};

export default store2;


```

*   2.  ç„¶ååœ¨ store ä¸­å¼•å…¥æˆ‘ä»¬æ–°åˆ›å»ºçš„ store2 æ¨¡å—ï¼š

```
import Vue from 'vue';
import Vuex from 'vuex';
import { state } from './state';
import { getters } from './getters';
import { mutations } from './mutations';
import { actions } from './actions';
import store2 from './store2'; // å¼•å…¥store2æ¨¡å—

Vue.use(Vuex);

const store = new Vuex.Store({
  modules: { store2 }, // æŠŠstore2æ¨¡å—æŒ‚è½½åˆ°storeé‡Œé¢
  state: state,
  getters: getters,
  mutations: mutations,
  actions: actions,
});

export default store;


```

*   3.  è®¿é—® state - æˆ‘ä»¬åœ¨ App.vue æµ‹è¯•è®¿é—® store2 æ¨¡å—ä¸­çš„ state ä¸­çš„ nameï¼Œç»“æœå¦‚ä¸‹ï¼š

```
<template>
  <div></div>
</template>

<script>
export default {
  mounted() {
    console.log(this.$store.state.store2.name); // è®¿é—®store2é‡Œé¢çš„nameå±æ€§
  },
};
</script>


```

æˆ‘ä»¬é€šè¿‡ä¸‹é¢çš„ä»£ç å¯ä»¥äº†è§£åˆ°åœ¨ä¸åŒçš„å±æ€§é‡Œæ˜¯æ€ä¹ˆè®¿é—® **æ¨¡å—å†…çš„çŠ¶æ€** æˆ–è€… **æ ¹çŠ¶æ€**ï¼š

```
mutations: {
  changeName(state, payload) {
    // state å±€éƒ¨çŠ¶æ€
    console.log(state);
    console.log(payload.where);
  },
},
getters: {
  testGetters(state, getters, rootState) {
    // state å±€éƒ¨çŠ¶æ€
    console.log(state);
    // å±€éƒ¨ getters,
    console.log(getters);
    // rootState æ ¹èŠ‚ç‚¹çŠ¶æ€
    console.log(rootState);
  },
},
actions: {
  increment({ state, commit, rootState }) {
    // state å±€éƒ¨çŠ¶æ€
    console.log(state);
    // rootState æ ¹èŠ‚ç‚¹çŠ¶æ€
    console.log(rootState);
  },
},


```

ä»¥ä¸Šæ˜¯å¯¹ module çš„ç®€å•ä»‹ç»ï¼Œå…¶å®è¿™é‡Œå°±æ˜¯ä¸€ç§æ€æƒ³ï¼Œåˆ†è€Œæ²»ä¹‹ï¼Œå°†å¤æ‚çš„è¿›è¡Œæ‹†åˆ†ï¼Œå¯ä»¥æ›´æœ‰æ•ˆçš„ç®¡ç†ã€‚

å…¶å®ä»¥ä¸Šå¹¶ä¸æ˜¯ module çš„å…¨éƒ¨ï¼Œè¿˜æœ‰ä¸€äº›æ¯”å¦‚`å‘½åç©ºé—´`ã€`æ¨¡å—æ³¨å†Œå…¨å±€ action`ã€`å¸¦å‘½åç©ºé—´çš„ç»‘å®šå‡½æ•°`ã€`æ¨¡å—åŠ¨æ€æ³¨å†Œ`ã€`æ¨¡å—é‡ç”¨`ç­‰æ–¹æ³•è¿™é‡Œå°±æ²¡ä»‹ç»ï¼Œå¦‚æœä½ åœ¨é¡¹ç›®ä¸­ä½¿ç”¨åˆ°äº†ï¼Œå†è¿›è¡ŒæŸ¥é˜…å³å¯ï¼Œæœ‰æ—¶å€™ä¸éœ€è¦å®Œå…¨ç†è§£ï¼ŒçŸ¥é“æœ‰è¿™ä¸ªä¸œè¥¿å°±è¡Œï¼ŒçŸ¥é“å‡ºäº†é—®é¢˜çš„æ—¶å€™è¯¥å»å“ªæŸ¥èµ„æ–™å°±å¤Ÿå•¦ã€‚ğŸ˜Š

ç¬¬å…«æ­¥ï¼Œæ€»ç»“
======

ğŸ¤— å¥½ï¼å¤§è‡´å¯¹ vuex çš„è®²è§£å°±åˆ°è¿™é‡Œäº†ï¼Œçœ‹åˆ°è¿™é‡Œä½ è‚¯å®šå¯¹ vuex ä¸é™Œç”Ÿäº†ï¼Œä½ ä¼šå®‰è£…å®ƒï¼Œé…ç½®å®ƒï¼Œè¯»å– state çš„å€¼ï¼Œç”šè‡³ä¿®é¥°è¯» (Getter)ï¼Œç„¶åä½ ä¼šä¿®æ”¹é‡Œé¢çš„å€¼äº† (Mutation)ï¼Œå‡å¦‚ä½ æœ‰å¼‚æ­¥æ“ä½œå¹¶ä¸”éœ€è¦ä¿®æ”¹ stateï¼Œé‚£ä½ å°±è¦ä½¿ç”¨ Actionï¼Œè¿™æ ·ï¼Œä½ å°±å¯ä»¥åœ¨ä½ çš„é¡¹ç›®ä¸­ç”¨èµ·æ¥ vuex å•¦ï¼åŠ æ²¹å§ï¼ğŸ¤”